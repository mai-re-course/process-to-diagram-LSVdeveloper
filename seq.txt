@startuml
== Пользователь вводит запрос в адресную строку браузера ==

Actor Пользователь

Пользователь -> Браузер: Ввод google.com

Activate Браузер

== Поиск в кэше DNS IP-адреса ==


Браузер -> Браузер: Поиск DNS для данного адреса в кэше

alt  Поиск в кэше браузера не успешен

Браузер -> ОС: Вызов gethostname для поиска DNS

Activate ОС

ОС --> Браузер: Ответ на запрос

else  Поиск успешен

ОС --> Браузер: Получен IP-адрес

Deactivate ОС

end

alt Поиск в кэше ОС не успешен

Браузер -> Маршрутизатор: Поиск DNS в кэше маршрутизатора

Activate Маршрутизатор

Маршрутизатор --> Браузер: Ответ на запрос
else  Поиск успешен

Маршрутизатор --> Браузер: Получен IP-адрес

Deactivate Маршрутизатор

end

== Поиск IP-адреса на DNS серверах ==

alt Поиск в кэше маршрутизатора не успешен

Браузер -> DNS_сервер_провайдера: Поиск DNS в кэше провайдера

Activate DNS_сервер_провайдера

DNS_сервер_провайдера -> Сервера_имён: Поиск IP-адреса по данному домену

Activate Сервера_имён

Сервера_имён --> Браузер: Получен IP-адрес

break IP-адрес не найден

Сервера_имён x--> DNS_сервер_провайдера: IP-адрес не найден

DNS_сервер_провайдера --> Браузер: Ошибка "Не удалось найти IP-адрес сервера"

end

Deactivate Сервера_имён

Deactivate DNS_сервер_провайдера

end

== TCP-соединение с сервером ==

Компьютер -> google_cервер: Синхронизация

Activate google_cервер

Activate Компьютер

google_cервер --> Компьютер: Потдверждение

google_cервер <--> Компьютер: TCP-соединение

Компьютер -> Браузер: TCP-соединение установлено

alt TCP-соединение не установлено

google_cервер x--> Компьютер: Нет открытых портов

Компьютер --> Браузер: Ошибка "Соединение не установлено"

end

== HTTP-запрос на сервер ==

Браузер -> google_cервер: запрос на google.com

note left

**Успешный статус HTTP-сервера**

200 OK

end note

== Отображение страницы браузером==

Браузер -> Браузер: Отображает основную часть HTML

Браузер -> google_cервер: Запрос на дополнительные элементы

google_cервер --> Браузер: Получение ответа на запрос

Deactivate google_cервер

Браузер -> Браузер: Отображение страницы с основными и дополнительными элементами

Deactivate Компьютер
@enduml